// SVG icons from topo-builder - using CSS variables for theming
const spineSvg = `<svg width="28" height="28" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 4C0 1.79086 1.79086 0 4 0H16C18.2091 0 20 1.79086 20 4V16C20 18.2091 18.2091 20 16 20H4C1.79086 20 0 18.2091 0 16V4Z" fill="var(--color-icon-bg)" />
  <path fill-rule="evenodd" clip-rule="evenodd" d="M5.125 6.375C5.125 5.96079 5.46079 5.625 5.875 5.625H7.625C8.03921 5.625 8.375 5.96079 8.375 6.375V6.625H11.625V6.375C11.625 5.96079 11.9608 5.625 12.375 5.625H14.125C14.5392 5.625 14.875 5.96079 14.875 6.375V8.125C14.875 8.53921 14.5392 8.875 14.125 8.875H13.875V12.125H14.125C14.5392 12.125 14.875 12.4608 14.875 12.875V14.625C14.875 15.0392 14.5392 15.375 14.125 15.375H12.375C11.9608 15.375 11.625 15.0392 11.625 14.625V14.375H8.375V14.625C8.375 15.0392 8.03921 15.375 7.625 15.375H5.875C5.46079 15.375 5.125 15.0392 5.125 14.625V12.875C5.125 12.4608 5.46079 12.125 5.875 12.125H6.125V8.875H5.875C5.46079 8.875 5.125 8.53921 5.125 8.125V6.375ZM6.875 8.875V12.125H7.625C7.68994 12.125 7.75302 12.1333 7.8132 12.1489L9.46208 10.5L7.8132 8.85112C7.75302 8.8667 7.68994 8.875 7.625 8.875H6.875ZM8.34791 8.32517L9.99241 9.96967L11.6489 8.3132C11.6333 8.25302 11.625 8.18994 11.625 8.125V7.375H8.375V8.125C8.375 8.19428 8.36555 8.26142 8.34791 8.32517ZM12.1748 8.84791L10.5227 10.5L12.1748 12.1521C12.2386 12.1344 12.3057 12.125 12.375 12.125H13.125V8.875H12.375C12.3057 8.875 12.2386 8.86555 12.1748 8.84791ZM11.6489 12.6868L9.99241 11.0303L8.34791 12.6748C8.36555 12.7386 8.375 12.8057 8.375 12.875V13.625H11.625V12.875C11.625 12.8101 11.6333 12.747 11.6489 12.6868ZM7.625 6.375L5.875 6.375V8.125H7.625V6.375ZM14.125 6.375L12.375 6.375V8.125H14.125V6.375ZM5.875 12.875V14.625H7.625V12.875H5.875ZM12.375 12.875V14.625H14.125V12.875H12.375Z" fill="var(--color-icon-fg)" />
</svg>`;

const leafSvg = `<svg width="28" height="28" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 4C0 1.79086 1.79086 0 4 0H16C18.2091 0 20 1.79086 20 4V16C20 18.2091 18.2091 20 16 20H4C1.79086 20 0 18.2091 0 16V4Z" fill="var(--color-icon-bg)" />
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.18773 8.10983C7.33418 7.96339 7.57162 7.96339 7.71807 8.10983L9.22429 9.61606C9.39754 9.78927 9.50361 10.0131 9.50361 10.2578C9.50361 10.5024 9.39754 10.7263 9.22431 10.8995L7.71807 12.4058C7.57162 12.5522 7.33418 12.5522 7.18773 12.4058C7.04129 12.2593 7.04129 12.0219 7.18773 11.8754L8.41632 10.6469H6.25994C6.11642 10.9679 5.79424 11.1916 5.4198 11.1916C4.91179 11.1916 4.5 10.7799 4.5 10.2719C4.5 9.76384 4.91179 9.35205 5.4198 9.35205C5.79424 9.35205 6.11642 9.57578 6.25994 9.89685H8.44442L7.18773 8.64017C7.04129 8.49372 7.04129 8.25628 7.18773 8.10983ZM12.7954 8.17688C12.9419 8.32333 12.9419 8.56077 12.7954 8.70722L11.6058 9.89685H13.7817C13.9252 9.57578 14.2474 9.35205 14.6218 9.35205C15.1298 9.35205 15.5416 9.76384 15.5416 10.2719C15.5416 10.7799 15.1298 11.1916 14.6218 11.1916C14.2474 11.1916 13.9252 10.9679 13.7817 10.6469H11.4998L12.7954 11.9425C12.9419 12.0889 12.9419 12.3264 12.7954 12.4728C12.649 12.6193 12.4115 12.6193 12.2651 12.4728L10.7589 10.9666C10.7589 10.9666 10.7589 10.9666 10.7589 10.9666C10.5856 10.7934 10.4795 10.5695 10.4795 10.3249C10.4795 10.0802 10.5856 9.85636 10.7588 9.68314L12.2651 8.17689C12.4115 8.03044 12.649 8.03044 12.7954 8.17688ZM5.4198 10.102C5.32601 10.102 5.25 10.1781 5.25 10.2719C5.25 10.3656 5.32601 10.4416 5.4198 10.4416C5.51359 10.4416 5.5896 10.3656 5.5896 10.2719C5.5896 10.1781 5.51359 10.102 5.4198 10.102ZM14.6218 10.102C14.528 10.102 14.452 10.1781 14.452 10.2719C14.452 10.3656 14.528 10.4416 14.6218 10.4416C14.7156 10.4416 14.7916 10.3656 14.7916 10.2719C14.7916 10.1781 14.7156 10.102 14.6218 10.102Z" fill="var(--color-icon-fg)" />
</svg>`;

const superspineSvg = `<svg width="28" height="28" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 10C0 4.47715 4.47715 0 10 0V0C15.5228 0 20 4.47715 20 10V10C20 15.5228 15.5228 20 10 20V20C4.47715 20 0 15.5228 0 10V10Z" fill="var(--color-icon-bg)" />
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10 5.375C7.44568 5.375 5.375 7.44568 5.375 10C5.375 12.5543 7.44568 14.625 10 14.625C12.5543 14.625 14.625 12.5543 14.625 10C14.625 7.44568 12.5543 5.375 10 5.375ZM4.625 10C4.625 7.03147 7.03147 4.625 10 4.625C12.9685 4.625 15.375 7.03147 15.375 10C15.375 12.9685 12.9685 15.375 10 15.375C7.03147 15.375 4.625 12.9685 4.625 10ZM8.73483 7.23483L9.73484 6.23483C9.88128 6.08839 10.1187 6.08839 10.2652 6.23483L11.2652 7.23483C11.4116 7.38128 11.4116 7.61872 11.2652 7.76517C11.1187 7.91161 10.8813 7.91161 10.7348 7.76517L10.375 7.40533V8.75C10.375 8.95711 10.2071 9.125 10 9.125C9.79289 9.125 9.625 8.95711 9.625 8.75V7.40533L9.26516 7.76517C9.11872 7.91161 8.88128 7.91161 8.73483 7.76517C8.58839 7.61872 8.58839 7.38128 8.73483 7.23483ZM7.48483 8.73483C7.63128 8.58839 7.86872 8.58839 8.01517 8.73483L9.01516 9.73484C9.16161 9.88128 9.16161 10.1187 9.01516 10.2652L8.01517 11.2652C7.86872 11.4116 7.63128 11.4116 7.48483 11.2652C7.33839 11.1187 7.33839 10.8813 7.48483 10.7348L7.84467 10.375H6.5C6.29289 10.375 6.125 10.2071 6.125 10C6.125 9.79289 6.29289 9.625 6.5 9.625H7.84467L7.48483 9.26516C7.33839 9.11872 7.33839 8.88128 7.48483 8.73483ZM12.5152 8.73483C12.6616 8.88128 12.6616 9.11872 12.5152 9.26516L12.1553 9.625H13.5C13.7071 9.625 13.875 9.79289 13.875 10C13.875 10.2071 13.7071 10.375 13.5 10.375H12.1553L12.5152 10.7348C12.6616 10.8813 12.6616 11.1187 12.5152 11.2652C12.3687 11.4116 12.1313 11.4116 11.9848 11.2652L10.9848 10.2652C10.8384 10.1187 10.8384 9.88128 10.9848 9.73484L11.9848 8.73483C12.1313 8.58839 12.3687 8.58839 12.5152 8.73483ZM10 10.875C10.2071 10.875 10.375 11.0429 10.375 11.25V12.5947L10.7348 12.2348C10.8813 12.0884 11.1187 12.0884 11.2652 12.2348C11.4116 12.3813 11.4116 12.6187 11.2652 12.7652L10.2652 13.7652C10.1187 13.9116 9.88128 13.9116 9.73484 13.7652L8.73483 12.7652C8.58839 12.6187 8.58839 12.3813 8.73483 12.2348C8.88128 12.0884 9.11872 12.0884 9.26516 12.2348L9.625 12.5947V11.25C9.625 11.0429 9.79289 10.875 10 10.875Z" fill="var(--color-icon-fg)" />
</svg>`;

// Default icon (generic server/node icon)
const defaultSvg = `<svg width="28" height="28" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M0 4C0 1.79086 1.79086 0 4 0H16C18.2091 0 20 1.79086 20 4V16C20 18.2091 18.2091 20 16 20H4C1.79086 20 0 18.2091 0 16V4Z" fill="var(--color-icon-bg)" />
  <rect x="5" y="6" width="10" height="2" rx="0.5" fill="var(--color-icon-fg)" />
  <rect x="5" y="9" width="10" height="2" rx="0.5" fill="var(--color-icon-fg)" />
  <rect x="5" y="12" width="10" height="2" rx="0.5" fill="var(--color-icon-fg)" />
</svg>`;

export const nodeIcons: Record<string, string> = {
  spine: spineSvg,
  leaf: leafSvg,
  borderleaf: leafSvg,
  superspine: superspineSvg,
  default: defaultSvg,
};

export function getNodeIcon(role: string | undefined): string {
  if (!role) return nodeIcons.default;
  const key = role.toLowerCase();
  return nodeIcons[key] ?? nodeIcons.default;
}
